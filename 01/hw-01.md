# Домашнее задание к занятию «Введение в Terraform»

### Цели задания

1. Установить и настроить Terrafrom.
2. Научиться использовать готовый код.

------

### Чек-лист готовности к домашнему заданию

1. Скачайте и установите **Terraform** версии =1.5.Х (версия 1.6 может вызывать проблемы с Яндекс провайдером) . Приложите скриншот вывода команды ```terraform --version```.
   ![image](https://github.com/netology-code/virtd-homeworks/assets/132663924/93095d4e-2d58-4a10-8f70-16502abf4d7a)

3. Скачайте на свой ПК этот git-репозиторий. Исходный код для выполнения задания расположен в директории **01/src**.
4. Убедитесь, что в вашей ОС установлен docker.
5. Зарегистрируйте аккаунт на сайте https://hub.docker.com/, выполните команду docker login и введите логин, пароль.

------

### Инструменты и дополнительные материалы, которые пригодятся для выполнения задания

1. Репозиторий с ссылкой на зеркало для установки и настройки Terraform: [ссылка](https://github.com/netology-code/devops-materials).
2. Установка docker: [ссылка](https://docs.docker.com/engine/install/ubuntu/). 
------
### Внимание!! Обязательно предоставляем на проверку получившийся код в виде ссылки на ваш github-репозиторий!
------

### Задание 1

1. Перейдите в каталог [**src**](https://github.com/netology-code/ter-homeworks/tree/main/01/src). Скачайте все необходимые зависимости, использованные в проекте. 
2. Изучите файл **.gitignore**. В каком terraform-файле, согласно этому .gitignore, допустимо сохранить личную, секретную информацию?
### Согласно файлу .gitignore, допустимо сохранять личную, секретную информацию в файле personal.auto.tfvars
3. Выполните код проекта. Найдите  в state-файле секретное содержимое созданного ресурса **random_password**, пришлите в качестве ответа конкретный ключ и его значение.
4. Раскомментируйте блок кода, примерно расположенный на строчках 29–42 файла **main.tf**.
Выполните команду ```terraform validate```. Объясните, в чём заключаются намеренно допущенные ошибки. Исправьте их.
### Ошибки, которые были допущены намеренно в первоначальной версии кода: Блок кода, содержащий ресурсы docker_image и docker_container, был закомментирован с использованием многострочного комментария (/* */), что привело к игнорированию этих ресурсов при выполнении Terraform. Неинформативное имя ресурса docker_container, которое не отражало смысл создаваемого контейнера.

5. Выполните код. В качестве ответа приложите: исправленный фрагмент кода и вывод команды ```docker ps```.
![image](https://github.com/netology-code/virtd-homeworks/assets/132663924/433f224d-d137-43c4-b20f-fc49a0c1fad3)

![image](https://github.com/netology-code/virtd-homeworks/assets/132663924/41a8e386-346b-43c6-976c-4a5dedf86d92)


6. Замените имя docker-контейнера в блоке кода на ```hello_world```. Не перепутайте имя контейнера и имя образа. Мы всё ещё продолжаем использовать name = "nginx:latest". Выполните команду ```terraform apply -auto-approve```.
Объясните своими словами, в чём может быть опасность применения ключа  ```-auto-approve```. Догадайтесь или нагуглите зачем может пригодиться данный ключ? В качестве ответа дополнительно приложите вывод команды ```docker ps```.
![image](https://github.com/netology-code/virtd-homeworks/assets/132663924/9e5068e5-0df8-4831-9ad6-c447f086e1c5)
### Ключ -auto-approve  используется для автоматического подтверждения выполнения изменений без запроса подтверждения пользователя. Опасность этого ключа заключается в том, что он может привести к нежелательным или непредвиденным изменениям в инфраструктуре. Если в конфигурации Terraform есть ошибки или непредвиденные последствия, то они могут быть применены без согласия, что может привести к потере данных. данный ключ может быть полезен в ситуациях, когда  уверены в том, что изменения безопасны и не представляют риска для  инфраструктуры, и хотите автоматизировать процесс применения изменений, чтобы сэкономить время и упростить процесс развертывания.

8. Уничтожьте созданные ресурсы с помощью **terraform**. Убедитесь, что все ресурсы удалены. Приложите содержимое файла **terraform.tfstate**. 
9. Объясните, почему при этом не был удалён docker-образ **nginx:latest**. Ответ **обязательно** подкрепите строчкой из документации [**terraform провайдера docker**](https://docs.comcloud.xyz/providers/kreuzwerker/docker/latest/docs).  (ищите в классификаторе resource docker_image )

![image](https://github.com/netology-code/virtd-homeworks/assets/132663924/88d87eba-b2b1-45ad-ac1f-8435f4ab33e1)
### docker-образ nginx:latest е был удалён  потому, что Terraform управляет контейнерами Docker, но не управляет самими образами Docker. Образы Docker обычно управляются отдельно от контейнеров. 
https://developer.hashicorp.com/terraform/tutorials/docker-get-started/docker-destroy
